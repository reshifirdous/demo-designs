{% import 'designs/create_macro.j2' as create %}

{% set device_type = 'cisco8200' %}
{% set device_role = 'wanswitch' %}
{% set ipam_role   = site_name %}
{% set vlan_role   = 'wanswitch_vlans' %}
{% set prefix_status = 'Active' %}
{% set device_status = 'Staged' %}
{% set protocol = 'vrrp' %}
{% set device_manufacturer = 'cisco' %}
{% set device_name_b = site_name + '-WRX-B' %}
{% set device_name_a = site_name + '-WRX-A' %}
{% set device_platform = "cisco_iosxe" %}

roles:
  {{ create.ipam_role(vlan_role) }}
  {{ create.ipam_role(ipam_role) }}

prefixes:
  {{ create.prefix(site_prefix, site_name, prefix_status, 'Site Subnet', tenant_name, ipam_role) }}
  {{ create.prefix(management_prefix, site_name, prefix_status, 'KGS Management Prefixes', tenant_name, ipam_role) }}

device_types:
  {{ create.device_type(device_type, device_manufacturer) }}

vlans:
  {{ vlan(999, "sinkhole", "Active", site_name, "sinkhole", vlan_role) }}
  {{ vlan(500, "B-Biz-Internet", "Active", site_name, "B-Biz-Internet", vlan_role) }}
  {{ vlan(501, "A-Public-Internet", "Active", site_name, "A-Public-Internet", vlan_role) }}
  {{ vlan(502, "B-LTE", "Active", site_name, "B-LTE", vlan_role) }}
  {{ vlan(503, "A-MPLS-Internet", "Active", site_name, "A-MPLS-Internet", vlan_role) }}
  {{ vlan(1650, "WRX-to-Edge", "Active", site_name, "WRX-to-Edge") }}
  {{ vlan(1651, "vlan1651", "Active", site_name, "sitevlans", vlan_role) }}
  {{ vlan(1700, "WRX-A-to-WRX-B", "Active", site_name, "WRX-A-to-WRX-B", vlan_role) }}
  {{ vlan(1702, "WRX-B-to-LAN", "Active", site_name, "WRX-B-to-LAN", vlan_role) }}
  {{ vlan(1711, "vlan1711", "Active", site_name, "sitevlans", vlan_role) }}
  {{ vlan(601, "Guest-WRX-B--EdgeB", "Active", site_name, "Guest-WRX-B--EdgeB", vlan_role) }}
  {{ vlan(603, "Guest-WRX-A--Edge-B", "Active", site_name, "Guest-WRX-A--Edge-B", vlan_role) }}
  {{ vlan(604, "Guest-WRX-B--EdgeA", "Active", site_name, "Guest-WRX-B--EdgeA", vlan_role) }}
  {{ vlan(611, "Guest-Services", "Active", site_name, "Guest-Services", vlan_role) }}
  {{ vlan(612, "name DIA-Provisioning", "Active", site_name, "name DIA-Provisioning", vlan_role) }}


devices:
  {{ create.device(device_name_a, device_type, device_role, site_name, tenant_name, device_platform, device_status) }}
  {{ create.device(device_name_b, device_type, device_role, site_name, tenant_name, device_platform, device_status) }}
